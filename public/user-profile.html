<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Document</title>
    <style>

        /* –°—Ç–∏–ª—å –¥–ª—è —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.68);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loader {
              display: flex;
              justify-content: center;
              align-items: center;
              gap: 6px;
              height: 60px;
            }
            
            .loader span {
              width: 10px;
              height: 10px;
              background-color: #67c2ff;
              border-radius: 50%;
              animation: bounce 1s infinite ease-in-out;
            }
            
            .loader span:nth-child(1) { animation-delay: 0s; }
            .loader span:nth-child(2) { animation-delay: 0.1s; }
            .loader span:nth-child(3) { animation-delay: 0.2s; }
            .loader span:nth-child(4) { animation-delay: 0.3s; }
            .loader span:nth-child(5) { animation-delay: 0.4s; }
            
            @keyframes bounce {
              0%, 80%, 100% {
                transform: scale(0.6);
                opacity: 0.3;
              }
              40% {
                transform: scale(1);
                opacity: 1;
              }
            }


        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* –°–µ–∫—Ü–∏—è —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º */
        .content {
            margin-bottom: 60px; /* –í—ã—Å–æ—Ç–∞ –ø–∞–Ω–µ–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
            flex: 1;
/*             padding: 20px; */
            overflow-y: auto;
            background-color: #f4f4f4;
        }

        /* –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .navbar {
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: fixed;
            bottom: 7px;
            left: 0;
            width: 100%;
            background-color: #fff;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            padding: 10px 0;
            user-select: none;
        }

        /* –ö–Ω–æ–ø–∫–∏ –Ω–∞ –ø–∞–Ω–µ–ª–∏ */
        .navbar button {
            background: none;
            border: none;
            font-size: 16px;
            color: #333;
            cursor: pointer;
            padding: 10px;
            transition: color 0.3s;
        }

        .navbar button:hover {
            color: #007bff;
        }

        .navbar button.active {
            color: #007bff;
        }

        #profile-inf {
            width: 90%;
            min-height: 105px;
            margin: auto;
            background: #fff; 
            box-shadow: 0 24px 48px #e6ebf566, 0 1px 4px #e3ebfc;
            border-radius: 12px;
            text-align: left;
            padding-left: 20px;
            align-content: center;
            word-wrap: break-word;
            margin-bottom: 20px;
        }





        .book-list {
            margin-bottom: 25px;
            width: 93%;
            margin: auto;
            background: #fff;
            box-shadow: 0 24px 48px #e6ebf566, 0 1px 4px #e3ebfc;
            border-radius: 12px;
            padding: 10px 7px;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã */
        .book-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            padding: 8px 11px;
            color: black;
            border-radius: 8px;
            margin-bottom: 8px;
            text-align: left;
            font-size: 14px;
            border-bottom: 2px solid #ddd; /* –î–æ–±–∞–≤–∏–ª —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ —Å–ø–∏—Å–∫–æ–º */
        }

        /* –î–µ–ª–∞–µ–º —Ç–µ–∫—Å—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –Ω–∞ –æ–¥–Ω–æ–π –ª–∏–Ω–∏–∏ */
        .book-header div {
            flex: 1;
            padding: 0 5px;
            white-space: nowrap; /* –ó–∞–ø—Ä–µ—â–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ */
        }

        /* –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ –≤ —Å–ø–∏—Å–∫–µ */
        .book-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            margin-bottom: 5px;
            background: #f8f9fa;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            font-size: 14px;
        }

        /* –ü–æ–∑–≤–æ–ª—è–µ–º —Ç–µ–∫—Å—Ç—É –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ */
        .book-item .book-title {
            flex: 2;
            word-wrap: break-word; /* –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å—É —Ç–µ–∫—Å—Ç–∞ */
            padding-left: 46px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫ */
        .book-date {
            font-weight: bold;
            color: #007bff;
        }

        .book-title {
            color: #333;
        }

        .notifications-box {
            width: 90%;
            min-height: 105px; /* –ó–∞–¥–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É */
            margin: auto;
            background: #fff;
            box-shadow: 0 24px 48px #e6ebf566, 0 1px 4px #e3ebfc;
            border-radius: 12px;
            text-align: left;
            padding-left: 20px; /* –û—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ */
            align-content: center;
            word-wrap: break-word; /* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω—ã—Ö —Å–ª–æ–≤ */
        }

        .notifications-box h3 {
            margin: 0;
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .notifications-box h2 {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .notifications-box #notifications-list p {
            margin: 8px 0;
            font-size: 14px;
            color: #666;
            line-height: 1.5; /* –£–≤–µ–ª–∏—á–∏–º –º–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è */
        }

        #requests-container {
            user-select: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
            }

            .request-item {
            padding: 20px;
            background-color: #f4f4f4;
            border: 1px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            }

            .request-item:hover {
            background-color: #e0e0e0;
            }

            .btn {
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            }

            .btn-primary {
            background-color: #007bff;
            color: white;
            border: none;
            }

            .btn-outline-primary {
            background-color: white;
            color: #007bff;
            border: 1px solid #007bff;
            }

            #request-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.5);
            }

        #news-container {
  justify-content: center;
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 25px;
}

.news-card {
  background-color: #ffffff;
  padding: 20px;
  border-radius: 8px;
  width: 300px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s;
}

/* .news-card:hover {
  transform: translateY(-10px);
} */

.news-card h2 {
  margin: 0 0 10px;
}

.news-card .desc {
  margin: 5px 0;
  white-space: pre-wrap; /* —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ */
}

.news-card a {
    color: #1e90ff;
    text-decoration: none;
}

.news-card a:hover {
    text-decoration: underline;
}

.news-meta {
    color: #9d9d9d;
    font-size: 15px;
    margin: 8px 0 0;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
}

.news-meta span {
    font-size: 13px;
    padding: 2px 8px;
    border-radius: 999px;
    white-space: nowrap;
}

.tag-default {
    background-color: #f0f0f0;
    color: #333;
}

.tag-app {
    border: 1px solid #1e90ff;
    background-color: transparent;
    color: #000;
}

.sticky-header {
    margin-bottom: 20px;
    position: sticky;
    top: 0;
    background-color: white; /* –ú–æ–∂–µ—à—å –ø–æ–º–µ–Ω—è—Ç—å —Ü–≤–µ—Ç */
    padding: 20px 30px; /* –û—Ç—Å—Ç—É–ø—ã —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É –∏ –ø–æ –±–æ–∫–∞–º */
    font-size: 28px;
    font-weight: bold;
    z-index: 999; /* –ü–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
    border-bottom: 1px solid #ccc;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* –õ—ë–≥–∫–∞—è —Ç–µ–Ω—å */
}

        * {
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* * {
            user-select: none;
        } */

    </style>
</head>
<body>

    <div id="loadingScreen">
        <div class="loader">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          <span></span>
        </div>

    </div>

    
    <div class="content" id="content">
    </div>    

    <div id="timeoutModal" style="display: none;">
    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è —Ç–∞–π–º-–∞—É—Ç–∞</h3>
    <select id="timeoutSelect">
        <option value="600000">10 –º–∏–Ω—É—Ç</option>
        <option value="1800000">30 –º–∏–Ω—É—Ç</option>
        <option value="3600000">1 —á–∞—Å</option>
        <option value="86400000">1 –¥–µ–Ω—å</option>
    </select>
    <button onclick="applyTimeout()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
    <button onclick="closeTimeoutModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

    <div class="navbar">
        <button id="newsButton" onclick="changeContent('news')">–ù–æ–≤–æ—Å—Ç–∏</button>
        <button id="booksButton" onclick="changeContent('books')">–ö–Ω–∏–≥–∏</button>
        <button id="profileButton" onclick="changeContent('profile')">–ü—Ä–æ—Ñ–∏–ª—å</button>
    </div>

    <script>
    const GOOGLE_SHEET_API = "https://script.google.com/macros/s/AKfycbxWq5SIZ3ps5bib-ZRKztnD-Lfe7-EO8BLaBavusX-Iry74ZDQM_NN-cMEtYhcCN0kr/exec"; // –≤—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–≤–æ—é —Å—Å—ã–ª–∫—É
    let globalUserData = null; // –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –æ–±—ä–µ–∫—Ç —É—á–µ–Ω–∏–∫–∞
    let newsData = []; // –∑–¥–µ—Å—å –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–æ–≤–æ—Å—Ç–∏

        window.addEventListener("DOMContentLoaded", async () => {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            document.getElementById("loadingScreen").style.display = "flex";

            await loadUserData(); // –∑–∞–≥—Ä—É–∑–∏–º –¥–∞–Ω–Ω—ã–µ –æ–¥–∏–Ω —Ä–∞–∑
            await loadNews(); // –∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –æ–¥–∏–Ω —Ä–∞–∑

            // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
            document.getElementById("loadingScreen").style.display = "none";
            
            changeContent("books"); // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞
            
        });
    
        async function loadUserData() {
            const login = localStorage.getItem("login");
            if (!login) return;
    
            const normalizedLogin = login.replace(/\D/g, '');
            const response = await fetch(GOOGLE_SHEET_API);
            const data = await response.json();
            const orgs = data.list1 || [];
    
            for (const org of orgs) {
                const studentsJson = JSON.parse(org.students_json || "{}");
                for (const className in studentsJson) {
                    const students = studentsJson[className];
                    for (const student of students) {
                        const studentPhone = (student["–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞"] || "").replace(/\D/g, "");
                        if (studentPhone === normalizedLogin) {
                            globalUserData = {
                                student,
                                org
                            };
                            return;
                        }
                    }
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
        async function loadNews() {
            const response = await fetch(GOOGLE_SHEET_API);
            const data = await response.json();
            newsData = data.news || [];
        }
    
        async function changeContent(section) {
            const content = document.getElementById("content");
            document.querySelectorAll('.navbar button').forEach(btn => btn.classList.remove('active'));
            const activeBtn = document.getElementById(`${section}Button`);
            if (activeBtn) activeBtn.classList.add('active');
    
            if (section === 'news') {
                content.innerHTML = `
                <div id="news-header" class="sticky-header">–ù–æ–≤–æ—Å—Ç–∏</div>
                <div id="news-container"></div>`;
            
                const newsContainer = document.getElementById('news-container');
            
                function convertLinks(text) {
                    const urlRegex = /(https?:\/\/[^\s]+)/g;
                    return text.replace(urlRegex, (url) => `<a href="${url}" target="_blank">${url}</a>`);
                }
            
                // ‚úÖ –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É), –ø—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ —Å—á—ë—Ç—É –ø–µ—Ä–≤—ã–º–∏
                const sortedNews = [...newsData].sort((a, b) => {
                    const dateA = new Date(a.date.split('.').reverse().join('-'));
                    const dateB = new Date(b.date.split('.').reverse().join('-'));
            
                    if (dateA < dateB) return 1;
                    if (dateA > dateB) return -1;
            
                    // –ï—Å–ª–∏ –¥–∞—Ç–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è ‚Äî –ø–æ –ø–æ—Ä—è–¥–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ: —á–µ–º –ø–æ–∑–∂–µ –≤ —Å–ø–∏—Å–∫–µ, —Ç–µ–º –≤—ã—à–µ
                    return newsData.indexOf(b) - newsData.indexOf(a);
                });
            
                sortedNews.forEach(newsItem => {
                    const isMatchingSchool = globalUserData && globalUserData.org.school === newsItem.school;
                    const isAppTag = newsItem.school.startsWith("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:");
            
                    if (isMatchingSchool || isAppTag) {
                        const newsCard = document.createElement('div');
                        newsCard.classList.add('news-card');
            
                        const formattedDate = formatDate(newsItem.date);
            
                        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ #—Ç–µ–≥
                        let tagsText = `#–®–∫–æ–ª–∞`;
            
                        if (isAppTag) {
                            const tagRaw = newsItem.school.split(":")[1].trim();
                            const tagItems = tagRaw.split(",").map(t => `#${t.trim()}`);
                            tagsText = tagItems.join(" ");
                        }
            
                        newsCard.innerHTML = `
                            <h2>${newsItem.title}</h2>
                            <p class="desc">${convertLinks(newsItem.desc)}</p>
                            <p style="color: #9d9d9d; font-size: 15px; margin-top: 8px;">
                                ${newsItem.date} <span style="font-size: 10px; margin: 0 6px;">|</span> ${tagsText}
                            </p>
                        `;
            
                        newsContainer.appendChild(newsCard);
                    }
                });
            }



    
            else if (section === 'books') {
                content.innerHTML = `<div id="books-header" class="sticky-header">–ö–Ω–∏–≥–∏</div>
                    <div class="book-list" id="book-container">
                        <div class="book-header">
                            <div class="book-date">–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏</div>
                            <div class="book-title">–ê–≤—Ç–æ—Ä –∏ –∑–∞–≥–ª–∞–≤–∏–µ –∫–Ω–∏–≥–∏</div>
                        </div>
                    </div>`;
                renderBooks();
            }

            else if (section === 'about') {
                content.innerHTML = `<div id="about-header" class="sticky-header">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>
                    <div id="notifications" class="notifications-box">
                        <h2>"–ú–æ—è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞" | –í–µ—Ä—Å–∏—è: 2.6</h2>
                        <div id="notifications-list">
                            <p style="white-space: pre-wrap">"–ú–æ—è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞" - —ç—Ç–æ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –ø–æ–ª—É—á–µ–Ω—ã—Ö –∏–ª–∏ –¥–ª—è —Å–¥–∞—á–∏ –Ω–∞–∑–∞–¥ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É.
                            
–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ <a href="https://forms.gle/mbnUohwcTS1iXy9j6" target="_blank">—Ñ–æ—Ä–º—É</a> –∏–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –ø–æ—á—Ç—É <a href="mailto:createprograms123@mail.ru?subject=–†–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ¬´–ú–æ—è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞¬ª" target="_blank">createprograms123@mail.ru</a> —É–∫–∞–∑–∞–≤ —Ç–µ–º—É –ø–∏—Å—å–º–∞: –†–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–ú–æ—è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞".
                            
–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å –Ω–∞—à–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏! </p>
                        </div>
                    </div>
                    <button id="exit-btn" style="
                        margin: 30px auto 20px;
                        display: block;
                        padding: 10px 20px;
                        font-size: 16px;
                        border: 1px solid #007bff;
                        background-color: white;
                        color: #007bff;
                        border-radius: 8px;
                        cursor: pointer;
                    " onclick="changeContent('profile')">
                        –ù–∞–∑–∞–¥
                    </button>

                    
                    `;
            }
    
            else if (section === 'profile') {
                content.innerHTML = `
                    <div id="profile-header" class="sticky-header">–ü—Ä–æ—Ñ–∏–ª—å</div>
                    <div id="profile-inf">
                        <div id="student-info"></div>
                    </div>
                    <div id="notifications" class="notifications-box">
                        <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                        <div id="notifications-list">
                            <p>–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.</p>
                        </div>
                    </div>
                    </div>
                    <button id="about-btn" style="
                        margin: 30px auto 20px;
                        display: block;
                        padding: 10px 20px;
                        font-size: 16px;
                        border: 1px solid #007bff;
                        background-color: white;
                        color: #007bff;
                        border-radius: 8px;
                        cursor: pointer;
                    " onclick="changeContent('about')">
                        –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
                    </button>

                    <button id="logout-btn" style="
                        margin: 30px auto 20px;
                        display: block;
                        padding: 10px 20px;
                        font-size: 16px;
                        border: 1px solid red;
                        background-color: white;
                        color: red;
                        border-radius: 8px;
                        cursor: pointer;
                    ">
                        –í—ã–π—Ç–∏
                    </button>
                `;
                renderStudentInfo();
            
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—Ö–æ–¥–∞
                document.getElementById("logout-btn").addEventListener("click", () => {
                    localStorage.removeItem("savedLogin");
                    localStorage.removeItem("savedPassword");
                    window.location.href = "index.html"; // –Ω–∞–∑–∞–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
                });
            }


        function convertLinks(text) {
            const urlRegex = /(https?:\/\/[^\s]+)/g;
            return text.replace(urlRegex, (url) => `<a href="${url}" target="_blank">${url}</a>`);
        }

        function renderStudentInfo() {
            const container = document.getElementById("student-info");
            if (!globalUserData) {
                container.innerHTML = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω.";
                return;
            }
    
            const student = globalUserData.student;
            const org = globalUserData.org;
    
            const fullName = `${student["–§–∞–º–∏–ª–∏—è"]} ${student["–ò–º—è"]} ${student["–û—Ç—á–µ—Å—Ç–≤–æ"]}`;
            const education = student["–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ"] || student["–†–æ–ª—å"] || "–ù–µ —É–∫–∞–∑–∞–Ω–æ";
            const schoolName = student["school"] || org.school || "–ù–µ —É–∫–∞–∑–∞–Ω–æ";
    
            container.innerHTML = `
                <p>${fullName}</p>
                <p>${student["–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ"] ? "–ö–ª–∞—Å—Å" : "–†–æ–ª—å"}: ${education}</p>
                <p>–£—á—Ä–µ–∂–¥–µ–Ω–∏–µ: ${schoolName}</p>
            `;
        }
    
        function renderBooks() {
            const container = document.getElementById("book-container");
            container.innerHTML = ""; // –æ—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º
        
            if (!globalUserData) {
                container.innerHTML += "<p>–£—á–µ–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω.</p>";
                return;
            }
        
            const allBooks = globalUserData.student.books || [];
        
            const currentBooks = allBooks.filter(book => book.status === false);
            const readBooks = allBooks.filter(book => book.status === true);
        
            // –ö–Ω–∏–≥–∏ –Ω–∞ —Ä—É–∫–∞—Ö
            const currentSection = document.createElement("div");
            currentSection.className = "book-section";
        
            const currentTitle = document.createElement("h3");
            currentTitle.textContent = "üìö –ö–Ω–∏–≥–∏ –Ω–∞ —Ä—É–∫–∞—Ö";
            currentSection.appendChild(currentTitle);
        
            if (currentBooks.length === 0) {
                currentSection.innerHTML += "<p>–ö–Ω–∏–≥–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</p>";
            } else {
                currentBooks.forEach(book => {
                    const item = document.createElement("div");
                    item.className = "book-item";
                    item.innerHTML = `
                        <div class="book-date">${book["–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏"] || "-"}</div>
                        <div class="book-title">${book["–ê–≤—Ç–æ—Ä –∏ –∑–∞–≥–ª–∞–≤–∏–µ –∫–Ω–∏–≥–∏"] || "-"}</div>
                    `;
                    currentSection.appendChild(item);
                });
            }
        
            container.appendChild(currentSection);
        
            // –ü—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏
            if (readBooks.length > 0) {
                const readSection = document.createElement("div");
                readSection.className = "book-section";
        
                const readTitle = document.createElement("h3");
                readTitle.textContent = "‚úÖ –ü—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏";
                readSection.appendChild(readTitle);
        
                readBooks.forEach(book => {
                    const item = document.createElement("div");
                    item.className = "book-item read";
                    item.innerHTML = `
                        <div class="book-date">${book["–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏"] || "-"}</div>
                        <div class="book-title">${book["–ê–≤—Ç–æ—Ä –∏ –∑–∞–≥–ª–∞–≤–∏–µ –∫–Ω–∏–≥–∏"] || "-"}</div>
                    `;
                    readSection.appendChild(item);
                });
        
                container.appendChild(readSection);
            }
        }

    
        function formatDate(date) {
            const dateObj = new Date(date);
            const day = String(dateObj.getDate()).padStart(2, '0');
            const month = String(dateObj.getMonth() + 1).padStart(2, '0'); // –ú–µ—Å—è—Ü—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 0
            const year = dateObj.getFullYear();
            return `${day}.${month}.${year}`;
        }
        }
    </script>

    
    
</body>
</html>
